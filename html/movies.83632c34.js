!function(){function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},i=r.parcelRequired7c6;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},r.parcelRequired7c6=i),i.register("iE7OH",(function(t,r){var n,o;e(t.exports,"register",(function(){return n}),(function(e){return n=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var i={};n=function(e){for(var t=Object.keys(e),r=0;r<t.length;r++)i[t[r]]=e[t[r]]},o=function(e){var t=i[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),i.register("1UHsN",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}})),i.register("ffZzF",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return t.get?t.get.call(e):t.value}})),i.register("5k7tO",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}})),i.register("jdVyQ",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}})),i.register("aNJCr",(function(t,r){var n;e(t.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var o={};function i(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var t=o[e];return t||(t=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return i(e[2])}return"/"}(),o[e]=t),t}})),i("iE7OH").register(JSON.parse('{"5R7ta":"movies.83632c34.js","kZ0B9":"istockphoto-924949200-170667a.602a96c2.jpeg","3eHBJ":"movies.c35a091f.css","kOjjd":"movies.e6bee205.js"}'));var s=i("8MBJY"),u={};Object.defineProperty(u,"__esModule",{value:!0}),u.default=function(e,t){var r=a.default(e,t,"get");return c.default(e,r)};var a=l(i("1UHsN")),c=l(i("ffZzF"));function l(e){return e&&e.__esModule?e:{default:e}}var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,t,r){p.default(e,t),t.set(e,r)};var d,p=(d=i("5k7tO"))&&d.__esModule?d:{default:d};var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t,r){var n=v.default(e,t,"set");return b.default(e,n,r),r};var v=g(i("1UHsN")),b=g(i("jdVyQ"));function g(e){return e&&e.__esModule?e:{default:e}}var _=i("a2hTj"),y={};Object.defineProperty(y,"__esModule",{value:!0}),y.default=function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;return e};var m=new WeakMap,w=function(){"use strict";function e(){t(s)(this,e),t(y)(this,"API_KEY","b1cca9f4ff0056a5a4eafc6c5006a5a4"),t(f)(this,m,{writable:!0,value:1}),t(y)(this,"endpoint","movie/upcoming")}return t(_)(e,[{key:"fetchMovies",value:function(){var r=new URLSearchParams({api_key:this.API_KEY,page:t(u)(this,m)});return fetch("".concat(e.BASE_URL,"/").concat(this.endpoint,"?").concat(r)).then((function(e){return console.log(e),404===e.status?Promise.reject(new Error("Not found!")):e.json()}))}},{key:"incrementPage",value:function(){t(h)(this,m,t(u)(this,m)+1)}}]),e}();t(y)(w,"BASE_URL","https://api.themoviedb.org/3");var j,x=w,M={loadMoreBtn:document.querySelector("[data-load-more]"),output:document.querySelector(".results"),error:document.querySelector(".error")};j=i("aNJCr").getBundleURL("5R7ta")+"../"+i("iE7OH").resolve("kZ0B9");var O=function(e){return e.map((function(e){var r=e.title,n=e.release_date,o=e.poster_path;return function(e){var t=e.title,r=e.year,n=e.poster;return'<div class="movie-card">\n      <img src="'.concat(n,'" alt="').concat(t,'" width="220" height="330">\n      <h5>').concat(t,"</h5>\n      <p>").concat(r,"</p>\n        </div>")}({title:r,year:new Date(n).getFullYear(),poster:o?"https://image.tmdb.org/t/p/w500".concat(o):t(j)})})).join("")},E=i("iU1Pc"),k=(s=i("8MBJY"),_=i("a2hTj"),function(){"use strict";function e(r){var n=r.selector,o=r.hidden,i=void 0!==o&&o,u=r.text,a=void 0===u?"Load More":u;t(s)(this,e),this.refs=this.getRefs(n),this.text=a,i&&this.hide()}return t(_)(e,[{key:"getRefs",value:function(e){var t={};return t.button=document.querySelector(e),t.label=t.button.querySelector(".label"),t.spinner=t.button.querySelector(".spinner"),t}},{key:"enable",value:function(){this.refs.button.disabled=!1,this.refs.label.textContent="Показать ещё",this.refs.spinner.classList.add("is-hidden")}},{key:"disable",value:function(){this.refs.button.disabled=!0,this.refs.label.textContent="Loading",this.refs.spinner.classList.remove("is-hidden")}},{key:"show",value:function(){this.refs.button.classList.remove("is-hidden")}},{key:"hide",value:function(){this.refs.button.classList.add("is-hidden")}}]),e}()),H=new x,P=new k({selector:".btn-primary",hidden:!0});function L(e){M.output.innerHTML="",M.loadMoreBtn.classList.add(".is-hidden"),M.error.textContent=e.message}console.log(P),H.fetchMovies().then((function(e){var r,n;r=e.results,n=O(r),M.output.insertAdjacentHTML("beforeend",n),e.page>=e.total_pages&&setTimeout((function(){t(E).Notify.info("This is the last pages!")}),500)})).catch(L)}();
//# sourceMappingURL=movies.83632c34.js.map
